# Git ワークフロー

このドキュメントでは、プロジェクトのGitワークフローについて説明します。

## ブランチ戦略

このプロジェクトでは、Feature Branch Workflowを採用しています。

- `main`: プロダクションブランチ
- 機能ブランチ: 各機能やバグ修正用の一時的なブランチ

### ブランチ命名規則

機能ブランチは、以下の命名規則に従って作成します：

- 機能追加: `feature/機能名`
- バグ修正: `fix/修正内容`
  - 複数の改善を含む場合: `fix/対象-and-改善内容`
    例：`fix/darkmode-and-filter-improvements`
- リファクタリング: `refactor/変更内容`
- ドキュメント: `docs/ドキュメント内容`
- 設定変更: `config/設定内容`

### コミットメッセージ規則
- 機能追加: `feat: 機能の説明`
- バグ修正: `fix: 修正内容の説明`
- リファクタリング: `refactor: 変更内容の説明`
- ドキュメント: `docs: ドキュメントの説明`
- 設定変更: `config: 設定の説明`
- パフォーマンス改善: `perf: 改善内容の説明`
- テスト追加: `test: テストの説明`

## コミットメッセージ

コミットメッセージは、以下の形式に従って記述します：

\`\`\`
<type>: <description>

[optional body]
[optional footer]
\`\`\`

### タイプ

- `feat`: 新機能
- `fix`: バグ修正
- `refactor`: リファクタリング
- `docs`: ドキュメントのみの変更
- `config`: 設定の変更
- `perf`: パフォーマンス改善
- `test`: テストの追加・修正

### 例

\`\`\`
feat: タスクのフィルタリング機能を追加

- キーワードによるフィルタリング
- 状態によるフィルタリング
- 優先度によるフィルタリング

Closes #123
\`\`\`

## プルリクエストのワークフロー

### プルリクエストの作成
1. 作業ブランチを作成
   ```bash
   git checkout -b <ブランチ名>
   ```

2. 変更を作成しコミット
   ```bash
   git add <変更したファイル>
   git commit -m "<コミットメッセージ>"
   ```

3. リモートにプッシュ
   ```bash
   git push origin <ブランチ名>
   ```

4. プルリクエストを作成
   - タイトル: コミットメッセージと同じ形式
   - 説明: 変更内容、影響範囲、テスト結果を必ず記載

### レビュープロセス
1. レビューコメントへの対応
   - 具体的な修正内容をコメントで報告する
   - 修正後は必ず動作確認を行い、その結果を報告する

2. レビュー完了条件
   - レビュアーからの LGTM を得てからマージを実行する

### マージ後の後処理
1. プルリクエストをマージする
   ```bash
   gh pr merge <PR番号> --merge --delete-branch
   ```

2. mainブランチを最新に更新する
   ```bash
   git pull origin main
   ```

## ドキュメント更新

### ジャーナルの作成
1. 作業完了後は必ず `docs/journal` に作業記録を残す
2. ファイル名の形式: `YYYY-MM-DD-作業内容.md`
3. 必須記載項目
   - 作業内容
   - プルリクエストの詳細
   - レビューコメントとその対応
   - 変更されたファイル一覧
   - 次のステップ

## その他のルール

### リベース

- 機能ブランチは定期的に`main`ブランチからリベースしてください
- コンフリクトが発生した場合は、機能ブランチ側で解決してください

### ブランチ保護

- `main`ブランチへの直接プッシュは禁止されています
- すべての変更はプルリクエストを通して行う必要があります

### CI/CD

プルリクエスト作成時に、以下のチェックが自動的に実行されます：

- ユニットテスト
- 統合テスト
- リント
- ビルド
- 型チェック

これらのチェックがすべて成功している必要があります。 