# CIエラー対応の手順

## エラーの確認

エラーの種類を特定し、適切なコマンドで確認します：

```bash
# CIの実行結果の確認
gh run list --limit 1                        # 最新のCI実行結果を確認
gh run view {id}                            # 特定のCI実行の詳細を確認
gh run view --log-failed --job={job_id}     # 失敗したジョブのログを確認

# 型エラーの確認
pnpm typecheck

# リントエラーの確認
pnpm biome:check
pnpm biome:lint

# テストエラーの確認
pnpm test
```

## エラーの修正手順

1. エラーメッセージを確認し、問題の箇所を特定する
2. ローカルで該当するチェックコマンドを実行し、エラーを再現する
3. エラーの修正を行う
4. 修正後、再度チェックコマンドを実行して確認する
5. すべてのチェックが通ることを確認する
   ```bash
   # 全チェックの実行
   pnpm typecheck && pnpm biome:check && pnpm test
   ```
6. 修正内容をコミットし、プッシュする
7. CIが再実行されることを確認する

## 型エラーの修正

1. `pnpm typecheck` でエラー箇所を特定
2. 型定義の修正または型アサーションの追加
3. 依存関係の型定義が最新かを確認
   ```bash
   pnpm install @types/パッケージ名@latest
   ```

## リントエラーの修正

1. `pnpm biome:check` でエラー箇所を特定
2. 可能な場合は自動修正を試す
   ```bash
   pnpm biome:format --write
   ```
3. 自動修正できない場合は手動で修正

## テストエラーの修正

1. `pnpm test` で失敗するテストを特定
2. テストコードまたは実装コードの修正
3. テストの期待値と実際の値の差分を確認
4. 必要に応じてデバッグログを追加

## 注意事項

- 修正は最小限に留め、関連する問題のみを修正する
- 大きな変更が必要な場合は、別のPRとして切り出す
- 修正内容は必ずレビュアーに報告する
- CIが通過しても、ローカルでの動作確認は必ず行う 